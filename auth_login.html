<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>로그인 | WeNers</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <style>body{font-family:Arial;padding:30px;background:#f6f9ff}div{max-width:420px;margin:40px auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,.06)}</style>
</head>
<body>
  <div>
    <h2>로그인</h2>
    <input id="email" type="email" placeholder="이메일 입력" /><br><br>
    <input id="password" type="password" placeholder="비밀번호 입력" /><br><br>
    <button id="btnLogin">로그인</button>
    <p><a href="auth_signup.html">회원가입하기</a></p>
  </div>

<script>
if(!window.SUPABASE_URL || !window.SUPABASE_ANON_KEY) {
  alert('config.js에 SUPABASE_URL / SUPABASE_ANON_KEY를 설정해주세요.');
  console.error('Missing Supabase config');
}
const supabase = supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);

document.getElementById('btnLogin').addEventListener('click', async ()=>{
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  try{
    const { data, error } = await supabase.auth.signInWithPassword({ email, password });
    if(error) {
      console.error('login error', error);
      return alert('로그인 실패: ' + error.message);
    }
    console.log('login success', data);
    alert('로그인 성공!');
    location.href = 'index.html'; // 메인으로 이동
  }catch(err){
    console.error(err);
    alert('로그인 중 오류 발생');
  }
});
</script>
</body>
</html>
